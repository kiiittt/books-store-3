var D=Object.defineProperty;var z=(e,o,t)=>o in e?D(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t;var u=(e,o,t)=>(z(e,typeof o!="symbol"?o+"":o,t),t);import"./autorization-7405e359.js";import{initializeApp as K}from"https://www.gstatic.com/firebasejs/9.21.0/firebase-app.js";import{getAuth as P,onAuthStateChanged as Y,createUserWithEmailAndPassword as J,updateProfile as G,signInWithEmailAndPassword as Q,signOut as R}from"https://www.gstatic.com/firebasejs/9.21.0/firebase-auth.js";class w{constructor(){u(this,"spinnerEl",document.createElement("div"));u(this,"circleFirst",document.createElement("div"));u(this,"circleSecond",document.createElement("div"));u(this,"modalEl",document.querySelector(".modal"));this.spinnerEl.classList.add("spinner"),this.circleFirst.classList.add("circle","circle-1","is-hidden"),this.circleSecond.classList.add("circle","circle-2","is-hidden"),this.spinnerEl.appendChild(this.circleFirst),this.spinnerEl.appendChild(this.circleSecond),document.body.appendChild(this.spinnerEl)}show(){this.spinnerEl.classList.remove("is-hidden"),this.circleFirst.classList.remove("is-hidden"),this.circleSecond.classList.remove("is-hidden"),this.modalEl.classList.contains("is-hidden")||this.modalEl.classList.add("is-hidden")}hide(){this.spinnerEl.classList.add("is-hidden"),this.circleFirst.classList.add("is-hidden"),this.circleSecond.classList.add("is-hidden"),this.modalEl.classList.contains("is-hidden")&&this.modalEl.classList.remove("is-hidden")}getEl(){return this.spinnerEl}}const c=new w,$=document.querySelector(".bestsellers-list");let g=[];const V=async()=>{c.show();const e=await fetch("https://books-backend.p.goit.global/books/top-books");e.ok?(g=await e.json(),f(),L(g)):console.error("Error fetching books:",e.status),c.hide()};V().then(e=>{g=e,f(),L(g)}).catch(e=>console.error(e));let h=0,y=0;function f(){window.screen.availWidth<768?(h=1,y=30):window.screen.availWidth>=768&&window.screen.availWidth<1440?(h=3,y=20):(h=5,y=15)}function L(e){if(!e||e.length===0)return;f();let o="";for(let t=0;t<e.length;t++){const s=e[t].list_name;o+=`
      <li class="bestsellers-list-item">
        <p class="bestsellers-general-category">${s}</p>
        <div class="bestsellers-book-list">`;const n=e[t].books;if(!(!n||n.length===0)){for(let l=0;l<n.length&&l!==h;l++){const r=n[l];o+=`
        <div class="bestsellers-book-item">
          <div class="test-wraper">
            <img src="${r.book_image}" alt="book-cover" class="bestsellers-book-cover" data-id="${r._id}" loading="lazy" data-modal-open>
          </div>
          <p class="bestsellers-book-title">${x(r.title,y)}</p>
          <p class="bestsellers-book-author">${r.author}</p>
        </div>`}o+=`
        </div>
        <button class="bestsellers-button" data-id="${e[t].list_name}">See more</button>
      </li>`}}$.innerHTML=o,ce()}window.addEventListener("resize",e=>{X(),f(),L(g)});function X(){$.innerHTML=""}function x(e,o){let t;return e.length<=o?t=e.slice(0,e.length):t=e.slice(0,o)+"...",t}const Z=document.querySelector(".bestsellers-list");document.querySelector(".category_list");document.querySelector(".item-category");const S=document.querySelector(".category_books"),ee=document.querySelector(".bestsellers-area"),te=document.querySelector(".category_books_container");Z.addEventListener("click",oe);function oe(e){if(e.target.nodeName!=="BUTTON")return;const o=e.target.dataset.id;return de(o),c.show(),fetch(`https://books-backend.p.goit.global/books/category?category=${o}`).then(t=>t.json()).then(t=>{ne(t,e),c.hide()}).catch(t=>{console.log(t),c.hide()})}function se(){S.innerHTML=""}function ne(e,o){ee.style.display="none",te.style.display="flex",le(o),se(),re(e);const t=e.map(({book_image:s,title:n,author:l,_id:r})=>`<li class = "category_books_items">
          <div class="test-wraper">
          <img src='${s}' alt='book-cover' class='bestsellers-book-cover' data-id="${r}">
          </div>
             <p class='bestsellers-book-title book-text'>${x(n,15)}</p>
             <p class='bestsellers-book-author'>${l}</p></li>
      `).join("");S.insertAdjacentHTML("beforeend",t)}function le(e){const o=document.querySelector(".category_books_title"),s=e.target.dataset.id.split(" "),n=s[s.length-1],r=s.slice(0,s.length-1).join(" ");o.textContent=r;const a=document.createElement("span");a.classList="last_word_category_title",a.textContent=n,o.append(a)}function re(e){if(e.length===0){const o=document.createElement("p");o.textContent="Oops, there is no books in this category.",o.classList.add("no-books-message"),S.appendChild(o);return}}function ce(){const e=document.querySelectorAll(".bestsellers-list-item");for(let o=0;o<e.length;o+=1)e[o].addEventListener("click",ae)}const q=document.querySelector(".img-and-description");function ae(e){if(e.target.className!=="bestsellers-book-cover")return;const o=e.target.dataset.id;c.show(),q.innerHTML="<p>Loading...</p>",fetch(`https://books-backend.p.goit.global/books/${o}`).then(t=>t.json()).then(t=>{ie(t),c.hide()}).catch(t=>{console.log(t),c.hide()})}function ie(e){q.innerHTML=`<img class="img-modal" src="${e.book_image}" alt="Image cover" />
      <div class="div-text-modal">
        <h1 class="item-modal">${e.title}</h1>
        <h3 class="autor-name-modal">${e.author}</h3>
        <p class="description-modal">${e.description}</p>
        <ul class="ul-modal">
          <li class="li-modal">
          <a href="${e.buy_links[0].url}" class="amazon-modal" target="_blank" data-book-id="${e._id}"></a>
          </li>
          <li class="li-modal">
          <a href="${e.buy_links[1].url}" class="book-modal" target="_blank" data-book-id="${e._id}"></a>
          </li>
          <li class="li-modal">
          <a href="${e.buy_links[4].url}" class="books-modal" target="_blank" data-book-id="${e._id}">
          </a></li>
        </ul>
      </div>`}function de(e){const o=document.querySelectorAll(".category_button"),t=document.querySelector(".category_all");o.forEach(s=>{s.textContent===e?(s.style.fontWeight="700",s.style.lineHeight="1.33",s.style.textTransform="uppercase",s.style.textAlign="left",s.style.color="var(--color-of-categoryAll-text)",t.style.fontWeight="400",t.style.lineHeight="1.12",t.style.textTransform="none",t.style.color="var(--color-of-category-text)"):(s.style.fontWeight="400",s.style.lineHeight="1.12",s.style.textTransform="none",s.style.color="var(--color-of-category-text)")})}const ue=document.querySelector(".btn-modal-add-js"),B="books-data-01";let v=JSON.parse(localStorage.getItem(B))||[];ue.addEventListener("click",ge);function ge(){const o={id:document.querySelector(".book-modal").dataset.bookId};v.push(o),localStorage.setItem(B,JSON.stringify(v))}const i=new w,T=document.querySelector(".category_list"),b=document.querySelector(".category_books"),A=document.querySelector(".bestsellers-area"),C=document.querySelector(".category_books_container"),me=document.querySelector(".category_all");async function he(){return await(await fetch("https://books-backend.p.goit.global/books/category-list")).json()}function ye(e){const o=e.map(({list_name:t})=>`
          <li class="item-category">
            <button type = "button" class="category_button">${t}</button>
          </li>
      `).join("");T.insertAdjacentHTML("beforeend",o)}he().then(e=>ye(e)).catch(e=>console.log(e));T.addEventListener("click",pe);function pe(e){if(e.target.className!=="category_button")return;const o=e.target.textContent;return H(o),M(),i.show(),fetch(`https://books-backend.p.goit.global/books/category?category=${e.target.textContent}`).then(t=>t.json()).then(t=>{O(t,e),i.hide()}).catch(t=>{console.log(t),i.hide()})}i.hide();function M(){b.innerHTML=""}function O(e,o){A.style.display="none",C.style.display="flex",Le(o),be(e);const t=e.map(({book_image:s,title:n,author:l,_id:r})=>`<li class = "category_books_items">
          <div class="test-wraper">
          <img src='${s}' alt='book-cover' class='bestsellers-book-cover' data-id="${r}">
          </div>
             <p class='bestsellers-book-title book-text'>${fe(n,15)}</p>
             <p class='bestsellers-book-author'>${l}</p></li>
      `).join("");b.insertAdjacentHTML("beforeend",t)}function fe(e,o){let t;return e.length<=o?t=e.slice(0,e.length):t=e.slice(0,o)+"...",t}function be(e){if(e.length===0){const o=document.createElement("p");o.textContent="Oops, there is no books in this category.",o.classList.add("no-books-message"),b.appendChild(o);return}}me.addEventListener("click",ke);function ke(e){A.style.display="flex",C.style.display="none";const o=e.target.className;Se(o)}function Le(e){const o=document.querySelector(".category_books_title"),s=e.target.textContent.split(" "),n=s[s.length-1],r=s.slice(0,s.length-1).join(" ");o.textContent=r;const a=document.createElement("span");a.classList="last_word_category_title",a.textContent=n,o.append(a)}function Se(e){const o=document.querySelectorAll(".category_button"),t=document.querySelector(".category_all");o.forEach(s=>{s.textContent!==e?(s.style.fontWeight="400",s.style.lineHeight="1.12",s.style.textTransform="none",s.style.color="var(--color-of-category-text)",t.style.fontWeight="700",t.style.lineHeight="1.33",t.style.textTransform="uppercase",t.style.color="var(--color-of-categoryAll-text)"):(s.style.fontWeight="400",s.style.lineHeight="1.12",s.style.textTransform="none",s.style.color="var(--color-of-category-text)")})}function H(e){const o=document.querySelectorAll(".category_button"),t=document.querySelector(".category_all");o.forEach(s=>{s.textContent===e?(s.style.fontWeight="700",s.style.lineHeight="1.33",s.style.textTransform="uppercase",s.style.textAlign="left",s.style.color="var(--color-of-categoryAll-text)",t.style.fontWeight="400",t.style.lineHeight="1.12",t.style.textTransform="none",t.style.color="var(--color-of-category-text)"):(s.style.fontWeight="400",s.style.lineHeight="1.12",s.style.textTransform="none",s.style.color="var(--color-of-category-text)")})}const Ce=document.querySelector(".bestsellers-list");document.querySelector(".bestsellers-general-category");Ce.addEventListener("click",ve);function ve(e){if(e.target.className!=="bestsellers-general-category")return;const o=e.target.textContent;return H(o),M(),fetch(`https://books-backend.p.goit.global/books/category?category=${e.target.textContent}`).then(t=>t.json()).then(t=>O(t,e)).catch(t=>console.log(t))}document.querySelector(".svg-close");const Ee=document.querySelector("[data-modal]");C.addEventListener("click",_e);function _e(e){e.target.className==="bestsellers-book-cover"&&Ee.classList.toggle("is-hidden")}document.querySelectorAll(".bestsellers-list-item");b.addEventListener("click",we);const W=document.querySelector(".img-and-description");function we(e){if(e.target.className!=="bestsellers-book-cover")return;i.show();const o=e.target.dataset.id;return W.innerHTML="<p>Loading...</p>",fetch(`https://books-backend.p.goit.global/books/${o}`).then(t=>t.json()).then(t=>{$e(t),i.hide()}).catch(t=>{console.log(t),i.hide()})}function $e(e){W.innerHTML=`<img class="img-modal" src="${e.book_image}" alt="Image cover" />
      <div class="div-text-modal">
        <h1 class="item-modal">${e.title}</h1>
        <h3 class="autor-name-modal">${e.author}</h3>
        <p class="description-modal">${e.description}</p>
        <ul class="ul-modal">
          <li class="li-modal">
          <a href="${e.buy_links[0].url}" class="amazon-modal" target="_blank"></a>
          </li>
          <li class="li-modal">
          <a href="${e.buy_links[1].url}" class="book-modal" target="_blank"></a>
          </li>
          <li class="li-modal">
          <a href="${e.buy_links[4].url}" class="books-modal" target="_blank">
          </a></li>
        </ul>
      </div>`}(()=>{const e={openModalBtn:document.querySelector(".bestsellers-area"),openModal:document.querySelector(".category_books_container"),closeModalBtn:document.querySelector("[data-modal-close]"),modal:document.querySelector("[data-modal]")};e.openModalBtn.addEventListener("click",o),e.closeModalBtn.addEventListener("click",t),window.addEventListener("keydown",s);function o(n){n.target.className==="bestsellers-book-cover"&&e.modal.classList.toggle("is-hidden")}function t(){e.modal.classList.toggle("is-hidden")}function s(n){n.key==="Escape"&&e.modal.classList.add("is-hidden")}})();const xe={apiKey:"AIzaSyD8Kd3K0g3O4pf6MJ2ISuj7niFF7gY68-M",authDomain:"authentication-f6359.firebaseapp.com",projectId:"authentication-f6359",storageBucket:"authentication-f6359.appspot.com",messagingSenderId:"490964966849",appId:"1:490964966849:web:f93da1cfe963d7548da340"},qe=K(xe),d=P(qe),Be=document.querySelector("form#authForm"),j=document.querySelector("#signUpButton"),k=document.querySelector("#signOutButton"),p=document.querySelector(".user-info"),E=document.querySelector(".btn-signup"),N=document.querySelector(".modal-js"),_=document.querySelector(".form--btn-submit"),Te=document.querySelector(".btn-profile"),Ae=async()=>{Y(d,e=>{e?(p.querySelector("span").nextSibling.textContent=We(e.displayName),E.classList.add("is-hidden"),p.classList.remove("is-hidden"),k.classList.add("is-hidden")):(E.classList.remove("is-hidden"),p.classList.add("is-hidden"))})};Ae();const I=(e,o,t)=>{J(d,o,t).then(s=>{const n=s.user;return console.log(n),N.classList.add("is-hidden"),G(d.currentUser,{displayName:e})}).then(()=>{p.querySelector("span").nextSibling.textContent=d.currentUser.displayName}).catch(s=>{const n=s.code,l=s.message;console.log(n+l)})},U=(e,o)=>{Q(d,e,o).then(t=>{N.classList.add("is-hidden"),console.log(t)}).catch(t=>{const s=t.code,n=t.message;console.log(s+n)})},Me=()=>{R(d).then(()=>{k.classList.remove("is-hidden")}).catch(e=>{const o=e.code,t=e.message;console.log(o+t)})};function Oe(e){e.preventDefault();const{email:o,password:t}=e.currentTarget.elements,s=o.value.trim(),n=t.value.trim();if(_.textContent.toLowerCase()==="sign up"){const{name:l}=e.currentTarget.elements,r=l.value.trim();I(r,s,n)}else _.textContent.toLowerCase()==="sign in"?U(s,n):alert("Something went wrong")}const He=()=>{k.classList.toggle("is-hidden")};j.addEventListener("click",I);j.addEventListener("click",U);k.addEventListener("click",Me);Be.addEventListener("submit",Oe);Te.addEventListener("click",He);function We(e){return e.charAt(0).toUpperCase()+e.slice(1)}const je=document.querySelector(".container"),m=document.createElement("div");m.classList.add("scroll-up_hidden");const Ne=()=>{const e=window.pageYOffset,o=document.documentElement.clientHeight;e>o?m.classList.add("scroll-up"):m.classList.remove("scroll-up")},F=()=>{window.pageYOffset>0&&(window.scrollBy(0,-65),setTimeout(F,0))};m.addEventListener("click",F);window.addEventListener("scroll",Ne);je.appendChild(m);
